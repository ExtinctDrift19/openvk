{extends "../@listView.xml"}
{var iterator = $contacts}
{var count    = $paginatorConf->count}
{var page     = $paginatorConf->page}
{var perPage  = 6}

{block title}{_contacts} {$club->getCanonicalName()}{/block}

{block header}
    <a href="{$club->getURL()}">{$club->getCanonicalName()}</a>
    » {_contacts}
{/block}

{block actions}
    
{/block}

{* BEGIN ELEMENTS DESCRIPTION *}

{block tabs}
    {if $club->canBeModifiedBy($thisUser)}
        <div class="tab">
            <a href="javascript:void(0)">
                {_main}
            </a>
        </div>
        <div class="tab">
            <a href="/club{$club->getId()}/followers">
                {_followers}
            </a>
        </div>
        <div id="activetabs" class="tab">
            <a id="act_tab_a" href="/club{$club->getId()}/contacts">
                {_contacts}
            </a>
        </div>
        <div class="tab">
            <a href="/club{$club->getId()}/stats">
                {_statistics}
            </a>
        </div>
    {/if}
{/block}

{block link|strip|stripHtml}
    /id{$x->getId()}
{/block}

{block preview}
    <img src="{$x->getUser()->getAvatarURL()}" alt="{$x->getUser()->getCanonicalName()}" width=75 />
{/block}

{block name}
    {$x->getUser()->getCanonicalName()}
{/block}

{block description}
    <table>
        <tbody>
            <tr>
                <td width="120" valign="top"><span class="nobold">{_"gender"}: </span></td>
                <td>{$x->getUser()->isFemale() ? "женский" : "мужской"}</td>
            </tr>
            <tr>
                <td width="120" valign="top"><span class="nobold">{_description}: </span></td>
                <td>
                    {$x->getDescription()}
                </td>
            </tr>
            <tr>
                <td width="120" valign="top"><span class="nobold">{_role}: </span></td>
                <td>
                    {$club->canBeModifiedBy($x->getUser()) ? tr("administrator") : tr("follower")}
                </td>
            </tr>
            <tr n:if="$club->canBeModifiedBy($thisUser ?? NULL) && $club->getOwner()->getId() !== $x->getUser()->getId()">
                <td width="120" valign="top"><span class="nobold">{_actions}: </span></td>
                <td>
                    <a href="javascript:contactEdit({$x->getUser()->getId()}, {rawurlencode($csrfToken)})">
                        {_edit}
                    </a>,
                    <a href="javascript:contactDelete({$x->getUser()->getId()}, {rawurlencode($csrfToken)})">
                        {_delete}
                    </a>
                </td>
            </tr>
        </tbody>
    </table>
{/block}
